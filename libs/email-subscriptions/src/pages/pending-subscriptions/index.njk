{% extends "layouts/base-template.njk" %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}

{% set displayError = locations.length == 0 %}

{% block pageTitle %}
  {% if displayError %}
    There is a problem - {{ serviceName }} - {{ govUk }}
  {% else %}
    {{ title }} - {{ serviceName }} - {{ govUk }}
  {% endif %}
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: back,
    href: "/location-name-search"
  }) }}
{% endblock %}

{% block page_content %}
  <div class="parent-box">
  {% if displayError %}
    <h1 class="govuk-heading-l">{{ heading }}</h1>
    <div class="govuk-grid-row">
      <div class="no_padding govuk-grid-column-two-thirds">
        {{ govukErrorSummary({
          titleText: errors.titleText,
          errorList: errors.errorList
        }) }}
      </div>
    </div>
    <form action="/location-name-search"  method="get">
      <div class="govuk-!-text-align-left">
        {{ govukButton({
          text: backToSearch
        }) }}
      </div>
    </form>
  {% else %}
    <h1 class="govuk-heading-l">{{ heading }}</h1>

    {% if errors %}
      {{ govukErrorSummary({
        titleText: errors.titleText,
        errorList: errors.errorList
      }) }}
    {% endif %}

    <p class="govuk-body">{{ reviewMessage }}</p>

    <form action="/location-name-search"  method="get">
      <table class="govuk-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">{{ heading }}</th>
            <th scope="col" class="govuk-table__header govuk-!-text-align-right">Actions</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
        {% for location in locations %}
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">{{ location.name }}</td>
            <td class="govuk-table__cell govuk-!-text-align-right">
              <form method="post" style="display: inline;">
                <input type="hidden" name="action" value="remove">
                <input type="hidden" name="locationId" value="{{ location.locationId }}">
                <button type="submit" class="govuk-link" style="background: none; border: none; padding: 0; color: #1d70b8; text-decoration: underline; cursor: pointer;">
                  {{ removeLink }}
                </button>
              </form>
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>

      <p class="govuk-body">{{ notificationMessage }}</p>

      <form method="post">
        <input type="hidden" name="action" value="confirm">
        {{ govukButton({
          text: confirmButton
        }) }}
      </form>

      <p class="govuk-body">
        <a class="govuk-link" href="/location-name-search">{{ cancelLink }}</a>
      </p>
    </form>
  {% endif %}
  </div>

{% endblock %}
